!function(a){a.fn.unmask=function(b,c){function j(){var b=d.scrollTop(),c=b+d.height(),e=h.filter(function(){var d=a(this);if(d.is(":hidden"))return!0;var e=d.offset().top,g=e+d.height();return g>=b-f.threshold&&e<=c+f.threshold});i=e.trigger("unmask"),h=h.not(i)}var i,d=a(window),e={mobile:767,tablet:1024,threshold:0,background:!1,source:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},f=a.extend({},e,b),g=window.devicePixelRatio>1,h=this;return this.one("unmask",function(){var b=d.width()>f.tablet?g?"data-src-retina":"data-src":d.width()>f.mobile?"data-src-tablet":"data-src-mobile",e=this.getAttribute(b),h=this.getAttribute("src");e=e||this.getAttribute("data-src"),e&&(f.background?this.style.backgroundImage="url("+e+")":this.setAttribute("src",e),"function"==typeof c&&c.call(this),a(this).one("error",function(){this.setAttribute("src",h)}))}),h.each(function(){f.background?this.style.backgroundImage="url("+f.source+")":this.setAttribute("src",f.source)}),d.on("scroll.unmask resize.unmask lookup.unmask touchmove.unmask",j),j(),this}}(window.jQuery);
